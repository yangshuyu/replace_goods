{"ast":null,"code":"import \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/card/style\";\nimport _Card from \"antd/es/card\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/cascader/style\";\nimport _Cascader from \"antd/es/cascader\";\nimport _objectSpread from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nvar _jsxFileName = \"/Users/yangshuyu/job/h5/replace/src/components/replace/New.jsx\";\n\n/**\n * Created by hao.cheng on 2017/4/13.\n */\nimport React, { Component } from 'react';\nimport LoginForm from '../forms/LoginForm';\nimport ModalForm from '../forms/ModalForm';\nimport HorizontalForm from '../forms/HorizontalForm';\nimport BreadcrumbCustom from '../BreadcrumbCustom';\nimport NewSelectTable from './NewSelectTable';\nimport axios from 'axios';\nvar FormItem = _Form.Item;\nvar Option = _Select.Option;\nvar url = 'http://localhost:5000/v1';\n\nvar NewComponent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(NewComponent, _Component);\n\n  function NewComponent() {\n    var _getPrototypeOf2;\n\n    var _this2;\n\n    _classCallCheck(this, NewComponent);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this2 = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(NewComponent)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this2.state = {\n      confirmDirty: false,\n      residences: [],\n      strategy: [{\n        value: '类别内销售最好',\n        label: '类别内销售最好'\n      }, {\n        value: '小类中销售最好',\n        label: '小类中销售最好'\n      }],\n      new_rule: [{\n        value: '最高毛利率',\n        label: '最高毛利率'\n      }, {\n        value: '店均销量',\n        label: '店均销量'\n      }],\n      data: []\n    };\n\n    _this2.handleSubmit = function () {\n      // e.preventDefault();\n      _this2.props.form.validateFieldsAndScroll(function (err, values) {\n        if (!err) {\n          console.log('Received values of form: ', values);\n        }\n\n        console.log('yangshuyu');\n        console.log(_assertThisInitialized(_assertThisInitialized(_this2)));\n        var category = values.category[0];\n        var new_amount = values.new_amount;\n        var start_price = values.start_price;\n        var end_price = values.end_price;\n        var new_rule = values.new_rule;\n        var strategy = values.strategy[0];\n\n        if (strategy == '类别内销售最好') {\n          strategy = 0;\n        } else {\n          strategy = 1;\n        }\n\n        if (new_rule == '最高毛利率') {\n          new_rule = 0;\n        } else {\n          new_rule = 1;\n        }\n\n        axios.get('http://localhost:5000/v1/new_goods', {\n          'params': {\n            'q': category,\n            'new_amount': new_amount,\n            'start_price': start_price,\n            'end_price': end_price,\n            'strategy': strategy,\n            'new_rule': new_rule\n          }\n        }).then(function (response) {\n          var options = [];\n          response.data.data.map(function (item) {\n            item.channel_store_amount = item.channel_store_amount + '(' + item.channel_store_amount + ')';\n            item.interest_rate = item.interest_rate + '(' + item.sale_price + ')';\n            options.push(item);\n          });\n\n          _this2.setState({\n            data: response.data.data,\n            isLoaded: true\n          });\n        }).catch(function (response) {\n          console.log(response);\n\n          _this2.setState({\n            isLoaded: false,\n            error: response\n          });\n        });\n      });\n    };\n\n    _this2.onChange = function (value, selectedOptions) {\n      console.log(value);\n      console.log(selectedOptions[3]);\n\n      _this2.setState({\n        inputValue: selectedOptions.map(function (o) {\n          return o.label;\n        }).join(', ')\n      });\n\n      var onChange = _this2.props.onChange;\n\n      if (onChange) {\n        onChange(_objectSpread({}, value));\n      }\n    };\n\n    return _this2;\n  }\n\n  _createClass(NewComponent, [{\n    key: \"child_data\",\n    value: function child_data(data) {\n      var _this3 = this;\n\n      console.log('这是一个data');\n      console.log(data);\n      axios.post(url + '/replace_goods', {\n        'foreign_item_id': data.foreign_item_id,\n        'item_status': '正常'\n      }).then(function (response) {\n        var foreign_item_id = response.data.data.foreign_item_id;\n        var list = _this3.state.data;\n        list.splice(list.findIndex(function (data) {\n          return data.foreign_item_id === foreign_item_id;\n        }), 1);\n\n        _this3.setState({\n          data: list,\n          isLoaded: true\n        });\n      }).catch(function (response) {\n        console.log(response);\n\n        _this3.setState({\n          isLoaded: false,\n          error: response\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this = this;\n\n      axios.get(url + '/cm_categories').then(function (response) {\n        console.log('yangshuyu');\n        console.log(response.data.data);\n        var options = [];\n        response.data.data.map(function (item) {\n          console.log(item);\n          options.push({\n            value: item.category,\n            label: item.category\n          });\n        });\n\n        _this.setState({\n          residences: options,\n          isLoaded: true\n        });\n      }).catch(function (error) {\n        console.log(error);\n\n        _this.setState({\n          isLoaded: false,\n          error: error\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      var formItemLayout = {\n        labelCol: {\n          xs: {\n            span: 24\n          },\n          sm: {\n            span: 8\n          }\n        },\n        wrapperCol: {\n          xs: {\n            span: 24\n          },\n          sm: {\n            span: 14\n          }\n        }\n      };\n      return React.createElement(\"div\", {\n        className: \"gutter-example\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(BreadcrumbCustom, {\n        first: \"\\u6C70\\u6362\",\n        second: \"\\u6362\\u65B0\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }), React.createElement(_Form, {\n        layout: \"inline\",\n        onSubmit: function onSubmit() {\n          return _this4.handleSubmit();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"gutter-box\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, React.createElement(_Card, {\n        title: \"\\u6C34\\u5E73\\u8868\\u5355\",\n        bordered: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(FormItem, Object.assign({}, formItemLayout, {\n        label: \"\\u9009\\u65B0\\u7B56\\u7565\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), getFieldDecorator('strategy', {\n        initialValue: ['类别内销售最好'],\n        rules: [{\n          type: 'array',\n          required: true,\n          message: '请选择选新策略!'\n        }]\n      })(React.createElement(_Cascader, {\n        options: this.state.strategy,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }))), React.createElement(FormItem, Object.assign({}, formItemLayout, {\n        label: \"\\u6838\\u5FC3\\u6307\\u6807\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }), getFieldDecorator('new_rule', {\n        initialValue: ['最高毛利率'],\n        rules: [{\n          type: 'array',\n          required: true,\n          message: '请选择核心指标!'\n        }]\n      })(React.createElement(_Cascader, {\n        options: this.state.new_rule,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }))), React.createElement(FormItem, Object.assign({}, formItemLayout, {\n        label: \"\\u5546\\u54C1\\u5206\\u7C7B\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }), getFieldDecorator('category', {\n        initialValue: ['zhejiang'],\n        rules: [{\n          type: 'array',\n          required: true,\n          message: '商品分类!'\n        }]\n      })(React.createElement(_Cascader, {\n        options: this.state.residences,\n        onChange: this.onChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233\n        },\n        __self: this\n      }))), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239\n        },\n        __self: this\n      }, \"\\u96F6\\u552E\\u4EF7:\")), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242\n        },\n        __self: this\n      }, getFieldDecorator('start_price', {\n        initialValue: 0,\n        rules: [{\n          required: true,\n          message: '最低零售价'\n        }]\n      })(React.createElement(_Input, {\n        style: {\n          width: 80\n        },\n        Inputplaceholder: \"\\u6700\\u4F4E\\u96F6\\u552E\\u4EF7\",\n        width: \"30\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247\n        },\n        __self: this\n      }))), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251\n        },\n        __self: this\n      }, \"\\u81F3\")), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      }, getFieldDecorator('end_price', {\n        initialValue: 10000,\n        rules: [{\n          required: true,\n          message: '最高零售价'\n        }]\n      })(React.createElement(_Input, {\n        style: {\n          width: 80\n        },\n        placeholder: \"\\u6700\\u9AD8\\u96F6\\u552E\\u4EF7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 258\n        },\n        __self: this\n      }))), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 264\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265\n        },\n        __self: this\n      }, \"\\u6BDB\\u5229\\u7387:\")), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268\n        },\n        __self: this\n      }, getFieldDecorator('start_price', {\n        initialValue: 0,\n        rules: [{\n          required: true,\n          message: '最低毛利率'\n        }]\n      })(React.createElement(_Input, {\n        style: {\n          width: 80\n        },\n        Inputplaceholder: \"\\u6700\\u4F4E\\u6BDB\\u5229\\u7387\",\n        width: \"30\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 273\n        },\n        __self: this\n      }))), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277\n        },\n        __self: this\n      }, \"\\u81F3\")), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 279\n        },\n        __self: this\n      }, getFieldDecorator('end_price', {\n        initialValue: 10000,\n        rules: [{\n          required: true,\n          message: '最高零售价'\n        }]\n      })(React.createElement(_Input, {\n        style: {\n          width: 80\n        },\n        placeholder: \"\\u6700\\u9AD8\\u96F6\\u552E\\u4EF7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284\n        },\n        __self: this\n      }))), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }, \"\\u65B0\\u54C1\\u4E2A\\u6570:\")), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294\n        },\n        __self: this\n      }, getFieldDecorator('new_amount', {\n        initialValue: 3,\n        rules: [{\n          required: true,\n          message: '新品个数'\n        }]\n      })(React.createElement(_Input, {\n        style: {\n          width: 130\n        },\n        placeholder: \"\\u65B0\\u54C1\\u4E2A\\u6570\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299\n        },\n        __self: this\n      })))), React.createElement(_Card, {\n        bordered: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 305\n        },\n        __self: this\n      }, React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306\n        },\n        __self: this\n      }, React.createElement(_Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307\n        },\n        __self: this\n      }, \"\\u8BA1\\u7B97\"))))), React.createElement(_Card, {\n        bordered: false,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321\n        },\n        __self: this\n      }, React.createElement(NewSelectTable, {\n        data: this.state.data,\n        pfn: this.child_data.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      })));\n    }\n  }]);\n\n  return NewComponent;\n}(Component);\n\nvar New = _Form.create()(NewComponent);\n\nexport default New;","map":{"version":3,"sources":["/Users/yangshuyu/job/h5/replace/src/components/replace/New.jsx"],"names":["React","Component","LoginForm","ModalForm","HorizontalForm","BreadcrumbCustom","NewSelectTable","axios","FormItem","Item","Option","url","NewComponent","state","confirmDirty","residences","strategy","value","label","new_rule","data","handleSubmit","props","form","validateFieldsAndScroll","err","values","console","log","category","new_amount","start_price","end_price","get","then","response","options","map","item","channel_store_amount","interest_rate","sale_price","push","setState","isLoaded","catch","error","onChange","selectedOptions","inputValue","o","join","post","foreign_item_id","list","splice","findIndex","_this","getFieldDecorator","formItemLayout","labelCol","xs","span","sm","wrapperCol","initialValue","rules","type","required","message","width","child_data","bind","New","create"],"mappings":"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","sourcesContent":["/**\n * Created by hao.cheng on 2017/4/13.\n */\nimport React, {Component} from 'react';\nimport {Card, Form, Input, Tooltip, Icon, Cascader, Select, Row, Col, Checkbox, Button} from 'antd';\nimport LoginForm from '../forms/LoginForm';\nimport ModalForm from '../forms/ModalForm';\nimport HorizontalForm from '../forms/HorizontalForm';\nimport BreadcrumbCustom from '../BreadcrumbCustom';\nimport NewSelectTable from './NewSelectTable'\nimport axios from 'axios'\nconst FormItem = Form.Item;\nconst Option = Select.Option;\n\nconst url = 'http://localhost:5000/v1'\nclass NewComponent extends Component {\n    state = {\n        confirmDirty: false,\n        residences: [],\n        strategy: [{\n            value: '类别内销售最好',\n            label: '类别内销售最好',\n\n        }, {\n            value: '小类中销售最好',\n            label: '小类中销售最好',\n        }],\n        new_rule:[\n            {\n                value: '最高毛利率',\n                label: '最高毛利率',\n\n            }, {\n                value: '店均销量',\n                label: '店均销量',\n            }\n        ],\n        data: []\n\n    };\n\n\n\n    child_data(data) {\n        console.log('这是一个data')\n        console.log(data)\n        axios.post(url + '/replace_goods', {\n                'foreign_item_id': data.foreign_item_id,\n                'item_status': '正常'\n            }\n        )\n            .then((response) => {\n                var foreign_item_id = response.data.data.foreign_item_id\n                let list = this.state.data;\n                list.splice(list.findIndex(data => data.foreign_item_id === foreign_item_id), 1);\n                this.setState({\n                    data: list,\n                    isLoaded: true\n                });\n            })\n            .catch((response) => {\n                console.log(response);\n                this.setState({\n                    isLoaded: false,\n                    error: response\n                })\n            })\n\n    }\n\n    componentDidMount() {\n        const _this = this;\n        axios.get(url + '/cm_categories')\n            .then(function (response) {\n                console.log('yangshuyu');\n                console.log(response.data.data);\n\n                var options = []\n\n                response.data.data.map(item => {\n                    console.log(item);\n                    options.push({\n                        value: item.category,\n                        label: item.category,\n                    })\n                })\n\n\n                _this.setState({\n                    residences: options,\n                    isLoaded: true\n                });\n            })\n            .catch(function (error) {\n                console.log(error);\n                _this.setState({\n                    isLoaded: false,\n                    error: error\n                })\n            })\n\n    }\n\n    handleSubmit = () => {\n        // e.preventDefault();\n        this.props.form.validateFieldsAndScroll((err, values) => {\n            if (!err) {\n                console.log('Received values of form: ', values);\n            }\n            console.log('yangshuyu')\n            console.log(this)\n            var category = values.category[0]\n            var new_amount = values.new_amount\n            var start_price = values.start_price\n            var end_price = values.end_price\n            var new_rule = values.new_rule\n            var strategy = values.strategy[0]\n\n            if (strategy == '类别内销售最好') {\n                strategy = 0\n            } else {\n                strategy = 1\n            }\n            if (new_rule == '最高毛利率') {\n                new_rule = 0\n            } else {\n                new_rule = 1\n            }\n\n            axios.get('http://localhost:5000/v1/new_goods',{\n                'params': {\n                    'q': category,\n                    'new_amount': new_amount,\n                    'start_price': start_price,\n                    'end_price': end_price,\n                    'strategy': strategy,\n                    'new_rule':new_rule\n                }\n\n            })\n                .then((response) =>{\n                    var options = []\n                    response.data.data.map(item => {\n                        item.channel_store_amount = item.channel_store_amount + '(' + item.channel_store_amount + ')'\n                        item.interest_rate = item.interest_rate + '(' + item.sale_price + ')'\n                        options.push(item)\n                    })\n\n                    this.setState({\n                        data: response.data.data,\n                        isLoaded: true\n                    });\n                })\n\n                .catch((response)=> {\n                    console.log(response);\n                    this.setState({\n                        isLoaded: false,\n                        error: response\n                    })\n                })\n\n        });\n    };\n\n    onChange = (value, selectedOptions) => {\n        console.log(value);\n        console.log(selectedOptions[3])\n        this.setState({\n            inputValue: selectedOptions.map(o=>o.label).join(', ')\n        });\n        const onChange = this.props.onChange;\n\n        if (onChange) {\n            onChange({...value});\n        }\n    }\n\n    render() {\n        const {getFieldDecorator} = this.props.form;\n        const formItemLayout = {\n            labelCol: {\n                xs: {span: 24},\n                sm: {span: 8},\n            },\n            wrapperCol: {\n                xs: {span: 24},\n                sm: {span: 14},\n            },\n        };\n\n        return (\n            <div className=\"gutter-example\">\n                <BreadcrumbCustom first=\"汰换\" second=\"换新\"/>\n                <Form layout=\"inline\" onSubmit={()=>this.handleSubmit()}>\n                    <div className=\"gutter-box\">\n                        <Card title=\"水平表单\" bordered={false}>\n                            <FormItem\n                                {...formItemLayout}\n                                label=\"选新策略\"\n                            >\n                                {getFieldDecorator('strategy', {\n                                    initialValue: ['类别内销售最好'],\n                                    rules: [{type: 'array', required: true, message: '请选择选新策略!'}],\n                                })(\n                                    <Cascader options={this.state.strategy}/>\n                                )}\n\n                            </FormItem>\n\n                            <FormItem\n                                {...formItemLayout}\n                                label=\"核心指标\"\n                            >\n                                {getFieldDecorator('new_rule', {\n                                    initialValue: ['最高毛利率'],\n                                    rules: [{type: 'array', required: true, message: '请选择核心指标!'}],\n                                })(\n                                    <Cascader options={this.state.new_rule} onChange={this.onChange}/>\n                                )}\n\n                            </FormItem>\n\n\n                            <FormItem\n                                {...formItemLayout}\n                                label=\"商品分类\"\n                            >\n                                {getFieldDecorator('category', {\n                                    initialValue: ['zhejiang'],\n                                    rules: [{type: 'array', required: true, message: '商品分类!'}],\n                                })(\n                                    <Cascader options={this.state.residences} onChange={this.onChange}/>\n                                )}\n\n                            </FormItem>\n\n                            <FormItem>\n                                <div>零售价:</div>\n                            </FormItem>\n\n                            <FormItem>\n                                {getFieldDecorator('start_price', {\n                                    initialValue: 0,\n                                    rules: [{ required: true, message: '最低零售价' }],\n                                })(\n                                    <Input style={{ width: 80 }} Inputplaceholder=\"最低零售价\" width=\"30\"/>\n                                )}\n                            </FormItem>\n                            <FormItem>\n                                <div>至</div>\n                            </FormItem>\n                            <FormItem>\n                                {getFieldDecorator('end_price', {\n                                    initialValue: 10000,\n                                    rules: [{ required: true, message: '最高零售价' }],\n                                })(\n                                    <Input style={{ width: 80 }} placeholder=\"最高零售价\" />\n                                )}\n                            </FormItem>\n\n\n\n                            <FormItem>\n                                <div>毛利率:</div>\n                            </FormItem>\n\n                            <FormItem>\n                                {getFieldDecorator('start_price', {\n                                    initialValue: 0,\n                                    rules: [{ required: true, message: '最低毛利率' }],\n                                })(\n                                    <Input style={{ width: 80 }} Inputplaceholder=\"最低毛利率\" width=\"30\"/>\n                                )}\n                            </FormItem>\n                            <FormItem>\n                                <div>至</div>\n                            </FormItem>\n                            <FormItem>\n                                {getFieldDecorator('end_price', {\n                                    initialValue: 10000,\n                                    rules: [{ required: true, message: '最高零售价' }],\n                                })(\n                                    <Input style={{ width: 80 }} placeholder=\"最高零售价\" />\n                                )}\n                            </FormItem>\n\n\n\n                            <FormItem>\n                                <div>新品个数:</div>\n                            </FormItem>\n\n                            <FormItem>\n                                {getFieldDecorator('new_amount', {\n                                    initialValue: 3,\n                                    rules: [{ required: true, message: '新品个数' }],\n                                })(\n                                    <Input style={{ width: 130 }} placeholder=\"新品个数\" />\n                                )}\n                            </FormItem>\n\n                        </Card>\n\n                        <Card bordered={false}>\n                            <FormItem>\n                                <Button\n                                    type=\"primary\"\n                                    htmlType=\"submit\"\n                                >\n\n                                    计算\n                                </Button>\n                            </FormItem>\n                        </Card>\n\n\n\n                    </div>\n                </Form>\n                <Card  bordered={false}>\n                    <NewSelectTable data={this.state.data} pfn={this.child_data.bind(this)}/>\n                </Card>\n\n            </div>\n        )\n    }\n}\n\nconst New = Form.create()(NewComponent);\n\nexport default New;"]},"metadata":{},"sourceType":"module"}