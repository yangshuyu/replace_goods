{"ast":null,"code":"import _objectSpread from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport \"antd/es/layout/style\";\nimport _Layout from \"antd/es/layout\";\nvar _jsxFileName = \"/Users/yangshuyu/job/h5/replace/src/components/SiderCustom.jsx\";\n\n/**\n * Created by hao.cheng on 2017/4/13.\n */\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport routes from '../routes/config'; // import SiderMenu from './SiderMenu';\n\nvar Sider = _Layout.Sider;\n\nvar SiderCustom =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SiderCustom, _Component);\n\n  function SiderCustom() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SiderCustom);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SiderCustom)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      collapsed: false,\n      mode: 'inline',\n      openKey: '',\n      selectedKey: '',\n      firstHide: true // 点击收缩菜单，第一次隐藏展开子菜单，openMenu时恢复\n\n    };\n\n    _this.menuClick = function (e) {\n      _this.setState({\n        selectedKey: e.key\n      });\n\n      console.log(_this.state);\n      var popoverHide = _this.props.popoverHide; // 响应式布局控制小屏幕点击菜单时隐藏菜单操作\n\n      popoverHide && popoverHide();\n    };\n\n    _this.openMenu = function (v) {\n      console.log(v);\n\n      _this.setState({\n        openKey: v[v.length - 1],\n        firstHide: false\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(SiderCustom, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      // this.setMenuOpen(this.props);\n      var state = SiderCustom.setMenuOpen(this.props);\n      this.setState(state);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(Sider, {\n        trigger: null,\n        breakpoint: \"lg\",\n        collapsed: this.props.collapsed,\n        style: {\n          overflowY: 'auto'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }), React.createElement(\"style\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"\\n                    #nprogress .spinner{\\n                        left: \".concat(this.state.collapsed ? '70px' : '206px', \";\\n                        right: 0 !important;\\n                    }\\n                    \")));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, state) {\n      if (props.collapsed !== state.collapsed) {\n        var state1 = SiderCustom.setMenuOpen(props);\n        var state2 = SiderCustom.onCollapse(props.collapsed);\n        return _objectSpread({}, state1, state2, {\n          firstHide: state.collapsed !== props.collapsed && props.collapsed,\n          // 两个不等时赋值props属性值否则为false\n          openKey: state.openKey || !props.collapsed && state1.openKey\n        });\n      }\n\n      return null;\n    }\n  }]);\n\n  return SiderCustom;\n}(Component);\n\nSiderCustom.setMenuOpen = function (props) {\n  var pathname = props.location.pathname;\n  return {\n    openKey: pathname.substr(0, pathname.lastIndexOf('/')),\n    selectedKey: pathname\n  };\n};\n\nSiderCustom.onCollapse = function (collapsed) {\n  console.log(collapsed);\n  return {\n    collapsed: collapsed,\n    // firstHide: collapsed,\n    mode: collapsed ? 'vertical' : 'inline'\n  };\n};\n\nexport default withRouter(SiderCustom);","map":{"version":3,"sources":["/Users/yangshuyu/job/h5/replace/src/components/SiderCustom.jsx"],"names":["React","Component","withRouter","routes","Sider","SiderCustom","state","collapsed","mode","openKey","selectedKey","firstHide","menuClick","e","setState","key","console","log","popoverHide","props","openMenu","v","length","setMenuOpen","overflowY","state1","state2","onCollapse","pathname","location","substr","lastIndexOf"],"mappings":"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","sourcesContent":["/**\n * Created by hao.cheng on 2017/4/13.\n */\nimport React, { Component } from 'react';\nimport { Layout } from 'antd';\nimport { withRouter } from 'react-router-dom';\nimport routes from '../routes/config';\n// import SiderMenu from './SiderMenu';\n\nconst { Sider } = Layout;\n\nclass SiderCustom extends Component {\n    static getDerivedStateFromProps (props, state) { \n        if (props.collapsed !== state.collapsed) {\n            const state1 = SiderCustom.setMenuOpen(props);\n            const state2 = SiderCustom.onCollapse(props.collapsed);\n            return {\n                ...state1,\n                ...state2,\n                firstHide: state.collapsed !== props.collapsed && props.collapsed, // 两个不等时赋值props属性值否则为false\n                openKey: state.openKey || (!props.collapsed && state1.openKey)\n            }\n        }\n        return null;\n    }\n    static setMenuOpen = props => {\n        const { pathname } = props.location;\n        return {\n            openKey: pathname.substr(0, pathname.lastIndexOf('/')),\n            selectedKey: pathname\n        };\n    };\n    static onCollapse = (collapsed) => {\n        console.log(collapsed);\n        return {\n            collapsed,\n            // firstHide: collapsed,\n            mode: collapsed ? 'vertical' : 'inline',\n        };\n    };\n    state = {\n        collapsed: false,\n        mode: 'inline',\n        openKey: '',\n        selectedKey: '',\n        firstHide: true, // 点击收缩菜单，第一次隐藏展开子菜单，openMenu时恢复\n    };\n    componentDidMount() {\n        // this.setMenuOpen(this.props);\n        const state = SiderCustom.setMenuOpen(this.props);\n        this.setState(state);\n    }\n    menuClick = e => {\n        this.setState({\n            selectedKey: e.key\n        });\n        console.log(this.state);\n        const { popoverHide } = this.props; // 响应式布局控制小屏幕点击菜单时隐藏菜单操作\n        popoverHide && popoverHide();\n    };\n    openMenu = v => {\n        console.log(v);\n        this.setState({\n            openKey: v[v.length - 1],\n            firstHide: false,\n        })\n    };\n    render() {\n        return (\n            <Sider\n                trigger={null}\n                breakpoint=\"lg\"\n                collapsed={this.props.collapsed}\n                style={{ overflowY: 'auto' }}\n            >\n                <div className=\"logo\" />\n                {/*<SiderMenu*/}\n                    {/*menus={routes.menus}*/}\n                    {/*onClick={this.menuClick}*/}\n                    {/*mode=\"inline\"*/}\n                    {/*selectedKeys={[this.state.selectedKey]}*/}\n                    {/*openKeys={this.state.firstHide ? null : [this.state.openKey]}*/}\n                    {/*onOpenChange={this.openMenu}*/}\n                {/*/>*/}\n                <style>\n                    {`\n                    #nprogress .spinner{\n                        left: ${this.state.collapsed ? '70px' : '206px'};\n                        right: 0 !important;\n                    }\n                    `}\n                </style>\n            </Sider>\n        )\n    }\n}\n\nexport default withRouter(SiderCustom);"]},"metadata":{},"sourceType":"module"}