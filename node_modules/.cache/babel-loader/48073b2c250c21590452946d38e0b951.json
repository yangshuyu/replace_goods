{"ast":null,"code":"import \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/checkbox/style\";\nimport _Checkbox from \"antd/es/checkbox\";\nimport \"antd/es/input/style\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/icon/style\";\nimport _Icon from \"antd/es/icon\";\nimport _classCallCheck from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/yangshuyu/job/h5/replace/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport \"antd/es/form/style\";\nimport _Form from \"antd/es/form\";\nvar _jsxFileName = \"/Users/yangshuyu/job/h5/replace/src/components/pages/Login.jsx\";\n\n/**\n * Created by hao.cheng on 2017/4/16.\n */\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { fetchData, receiveData } from '@/action'; // import { PwaInstaller } from '../widget';\n\nvar FormItem = _Form.Item;\n\nvar Login =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Login, _React$Component);\n\n  function Login() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Login)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n\n      _this.props.form.validateFields(function (err, values) {\n        if (!err) {\n          console.log('Received values of form: ', values);\n          var _fetchData = _this.props.fetchData;\n          if (values.userName === 'admin' && values.password === 'admin') _fetchData({\n            funcName: 'admin',\n            stateName: 'auth'\n          });\n          if (values.userName === 'guest' && values.password === 'guest') _fetchData({\n            funcName: 'guest',\n            stateName: 'auth'\n          });\n        }\n      });\n    };\n\n    _this.gitHub = function () {\n      window.location.href = 'https://github.com/login/oauth/authorize?client_id=792cdcd244e98dcd2dee&redirect_uri=http://localhost:3006/&scope=user&state=reactAdmin';\n    };\n\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var receiveData = this.props.receiveData;\n      receiveData(null, 'auth');\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      // React 16.3+弃用componentWillReceiveProps\n      var _this$props = this.props,\n          _this$props$auth = _this$props.auth,\n          nextAuth = _this$props$auth === void 0 ? {} : _this$props$auth,\n          history = _this$props.history; // const { history } = this.props;\n\n      if (nextAuth.data && nextAuth.data.uid) {\n        // 判断是否登陆\n        localStorage.setItem('user', JSON.stringify(nextAuth.data));\n        history.push('/');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var getFieldDecorator = this.props.form.getFieldDecorator;\n      return React.createElement(\"div\", {\n        className: \"login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"login-form\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"login-logo\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, \"React Admin\")), React.createElement(_Form, {\n        onSubmit: this.handleSubmit,\n        style: {\n          maxWidth: '300px'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, getFieldDecorator('userName', {\n        rules: [{\n          required: true,\n          message: '请输入用户名!'\n        }]\n      })(React.createElement(_Input, {\n        prefix: React.createElement(_Icon, {\n          type: \"user\",\n          style: {\n            fontSize: 13\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 54\n          },\n          __self: this\n        }),\n        placeholder: \"\\u7BA1\\u7406\\u5458\\u8F93\\u5165admin, \\u6E38\\u5BA2\\u8F93\\u5165guest\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }))), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, getFieldDecorator('password', {\n        rules: [{\n          required: true,\n          message: '请输入密码!'\n        }]\n      })(React.createElement(_Input, {\n        prefix: React.createElement(_Icon, {\n          type: \"lock\",\n          style: {\n            fontSize: 13\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }),\n        type: \"password\",\n        placeholder: \"\\u7BA1\\u7406\\u5458\\u8F93\\u5165admin, \\u6E38\\u5BA2\\u8F93\\u5165guest\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }))), React.createElement(FormItem, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, getFieldDecorator('remember', {\n        valuePropName: 'checked',\n        initialValue: true\n      })(React.createElement(_Checkbox, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"\\u8BB0\\u4F4F\\u6211\")), React.createElement(\"span\", {\n        className: \"login-form-forgot\",\n        href: \"\",\n        style: {\n          float: 'right'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"\\u5FD8\\u8BB0\\u5BC6\\u7801\"), React.createElement(_Button, {\n        type: \"primary\",\n        htmlType: \"submit\",\n        className: \"login-form-button\",\n        style: {\n          width: '100%'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, \"\\u767B\\u5F55\"), React.createElement(\"p\", {\n        style: {\n          display: 'flex',\n          justifyContent: 'space-between'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"\\u6216 \\u73B0\\u5728\\u5C31\\u53BB\\u6CE8\\u518C!\"), React.createElement(\"span\", {\n        onClick: this.gitHub,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, React.createElement(_Icon, {\n        type: \"github\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }), \"(\\u7B2C\\u4E09\\u65B9\\u767B\\u5F55)\"))))));\n    }\n  }]);\n\n  return Login;\n}(React.Component);\n\nvar mapStateToPorps = function mapStateToPorps(state) {\n  var auth = state.httpData.auth;\n  return {\n    auth: auth\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    fetchData: bindActionCreators(fetchData, dispatch),\n    receiveData: bindActionCreators(receiveData, dispatch)\n  };\n};\n\nexport default connect(mapStateToPorps, mapDispatchToProps)(_Form.create()(Login));","map":{"version":3,"sources":["/Users/yangshuyu/job/h5/replace/src/components/pages/Login.jsx"],"names":["React","connect","bindActionCreators","fetchData","receiveData","FormItem","Item","Login","handleSubmit","e","preventDefault","props","form","validateFields","err","values","console","log","userName","password","funcName","stateName","gitHub","window","location","href","prevProps","auth","nextAuth","history","data","uid","localStorage","setItem","JSON","stringify","push","getFieldDecorator","maxWidth","rules","required","message","fontSize","valuePropName","initialValue","float","width","display","justifyContent","Component","mapStateToPorps","state","httpData","mapDispatchToProps","dispatch","create"],"mappings":"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","sourcesContent":["/**\n * Created by hao.cheng on 2017/4/16.\n */\nimport React from 'react';\nimport { Form, Icon, Input, Button, Checkbox } from 'antd';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { fetchData, receiveData } from '@/action';\n// import { PwaInstaller } from '../widget';\n\nconst FormItem = Form.Item;\n\nclass Login extends React.Component {\n    componentWillMount() {\n        const { receiveData } = this.props;\n        receiveData(null, 'auth');\n    }\n    componentDidUpdate(prevProps) { // React 16.3+弃用componentWillReceiveProps\n        const { auth: nextAuth = {}, history } = this.props;\n        // const { history } = this.props;\n        if (nextAuth.data && nextAuth.data.uid) { // 判断是否登陆\n            localStorage.setItem('user', JSON.stringify(nextAuth.data));\n            history.push('/');\n        }\n    }\n    handleSubmit = (e) => {\n        e.preventDefault();\n        this.props.form.validateFields((err, values) => {\n            if (!err) {\n                console.log('Received values of form: ', values);\n                const { fetchData } = this.props;\n                if (values.userName === 'admin' && values.password === 'admin') fetchData({funcName: 'admin', stateName: 'auth'});\n                if (values.userName === 'guest' && values.password === 'guest') fetchData({funcName: 'guest', stateName: 'auth'});\n            }\n        });\n    };\n    gitHub = () => {\n        window.location.href = 'https://github.com/login/oauth/authorize?client_id=792cdcd244e98dcd2dee&redirect_uri=http://localhost:3006/&scope=user&state=reactAdmin';\n    };\n    render() {\n        const { getFieldDecorator } = this.props.form;\n        return (\n            <div className=\"login\">\n                <div className=\"login-form\" >\n                    <div className=\"login-logo\">\n                        <span>React Admin</span>\n                        {/*<PwaInstaller />*/}\n                    </div>\n                    <Form onSubmit={this.handleSubmit} style={{maxWidth: '300px'}}>\n                        <FormItem>\n                            {getFieldDecorator('userName', {\n                                rules: [{ required: true, message: '请输入用户名!' }],\n                            })(\n                                <Input prefix={<Icon type=\"user\" style={{ fontSize: 13 }} />} placeholder=\"管理员输入admin, 游客输入guest\" />\n                            )}\n                        </FormItem>\n                        <FormItem>\n                            {getFieldDecorator('password', {\n                                rules: [{ required: true, message: '请输入密码!' }],\n                            })(\n                                <Input prefix={<Icon type=\"lock\" style={{ fontSize: 13 }} />} type=\"password\" placeholder=\"管理员输入admin, 游客输入guest\" />\n                            )}\n                        </FormItem>\n                        <FormItem>\n                            {getFieldDecorator('remember', {\n                                valuePropName: 'checked',\n                                initialValue: true,\n                            })(\n                                <Checkbox>记住我</Checkbox>\n                            )}\n                            <span className=\"login-form-forgot\" href=\"\" style={{float: 'right'}}>忘记密码</span>\n                            <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\" style={{width: '100%'}}>\n                                登录\n                            </Button>\n                            <p style={{display: 'flex', justifyContent: 'space-between'}}>\n                                <span >或 现在就去注册!</span>\n                                <span onClick={this.gitHub} ><Icon type=\"github\" />(第三方登录)</span>\n                            </p>\n                        </FormItem>\n                    </Form>\n                </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToPorps = state => {\n    const { auth } = state.httpData;\n    return { auth };\n};\nconst mapDispatchToProps = dispatch => ({\n    fetchData: bindActionCreators(fetchData, dispatch),\n    receiveData: bindActionCreators(receiveData, dispatch)\n});\n\n\nexport default connect(mapStateToPorps, mapDispatchToProps)(Form.create()(Login));"]},"metadata":{},"sourceType":"module"}